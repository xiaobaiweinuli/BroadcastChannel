# 多频道聚合功能使用指南

## 功能说明

此功能允许你同时聚合多个 Telegram 频道的内容，并按时间顺序统一展示。

## 配置方法

### 方式一：使用多频道模式（推荐）

在 `.env` 文件中配置 `CHANNELS` 变量，使用英文逗号分隔多个频道名称：

```env
CHANNELS=channel1,channel2,channel3
```

例如：
```env
CHANNELS=xingshuang_blog,tech_news,daily_updates
```

### 方式二：单频道模式（向后兼容）

如果只需要展示单个频道，继续使用 `CHANNEL` 变量：

```env
CHANNEL=xingshuang_blog
```

## 优先级

- 如果同时配置了 `CHANNELS` 和 `CHANNEL`，系统将优先使用 `CHANNELS`（多频道模式）
- 如果只配置了 `CHANNEL`，系统将使用单频道模式

## 功能特性

### 1. 内容聚合
- 自动从所有配置的频道获取内容
- 按发布时间倒序排列（最新的在前）
- 每篇文章会显示来源频道标识
- **网站标题、描述和头像使用第一个频道的信息**

### 2. 频道标识
在多频道模式下，每篇文章的时间旁边会显示频道来源标识，格式为 `@频道名`

### 3. 搜索功能
- 支持跨频道搜索关键词
- 支持跨频道标签搜索
- 搜索结果会高亮显示匹配内容

### 4. 缓存优化
- 每个频道的数据独立缓存
- 多频道聚合结果也会缓存
- 缓存时间：15秒

### 5. 错误处理
- 如果某个频道获取失败，不会影响其他频道
- 失败的频道会在控制台输出错误日志

## 示例配置

### 完整的 .env 配置示例

```env
## 多频道聚合配置
CHANNELS=xingshuang_blog,tech_news,daily_updates

## 语言和时区设置
LOCALE=zh-cn
TIMEZONE=Asia/Shanghai

## 社交媒体用户名
GITHUB=xiaobaiweinuli

## SEO 配置项
NO_FOLLOW=false
NO_INDEX=false

## 展示评论
COMMENTS=true

## 侧边栏导航项
NAVS=博客,https://blog.xingshuang.xyz

## 启用 RSS 美化
RSS_BEAUTIFY=true

TAGS="true"
```

## 注意事项

1. **频道名称格式**：使用频道的用户名（不带 @ 符号），例如 `xingshuang_blog` 而不是 `@xingshuang_blog`

2. **频道顺序**：
   - **第一个频道非常重要**：网站的标题、描述和头像都会使用第一个频道的信息
   - 建议将主频道放在第一位
   - 例如：`CHANNELS=main_channel,secondary_channel,other_channel`

3. **性能考虑**：
   - 频道数量越多，首次加载时间越长
   - 建议不超过 5 个频道
   - 缓存会显著提升后续访问速度

4. **频道权限**：确保所有配置的频道都是公开频道，私有频道无法通过此方式访问

5. **评论功能**：在多频道模式下，评论功能仍然可以正常工作，会链接到对应频道的原始消息

## 故障排查

### 问题：某个频道内容没有显示

**解决方法**：
1. 检查频道名称是否正确（区分大小写）
2. 确认频道是公开的
3. 查看控制台日志，确认是否有错误信息

### 问题：内容更新不及时

**解决方法**：
1. 缓存时间为 15 秒，等待缓存过期后会自动更新
2. 可以通过重启服务清除缓存

### 问题：频道标识没有显示

**解决方法**：
1. 确认使用的是 `CHANNELS` 配置（多频道模式）
2. 检查浏览器缓存，尝试强制刷新页面
