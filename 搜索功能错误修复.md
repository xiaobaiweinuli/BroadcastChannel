# 搜索功能错误修复

## 问题描述

构建时出现错误：
```
[ERROR] CHANNELS is not defined
```

## 问题原因

在 `src/layouts/base.astro` 中：
1. 定义了 `channelsEnv` 和 `channels` 变量
2. 但在模板中使用了 `CHANNELS` 变量
3. 变量名不匹配导致错误

## 解决方案

### 修改前
```javascript
const channelsEnv = getEnv(import.meta.env, Astro, 'CHANNELS')
const channels = channelsEnv
  ? channelsEnv.split(',').map((c) => c.trim()).filter(Boolean)
  : []
const SHOW_CHANNELS = channels.length > 1
```

### 修改后
```javascript
const CHANNELS = getEnv(import.meta.env, Astro, 'CHANNELS')
```

## 修改说明

1. **简化变量定义**：直接定义 `CHANNELS` 变量，与其他环境变量保持一致
2. **移除冗余代码**：删除了 `channelsEnv`、`channels` 和 `SHOW_CHANNELS` 变量
3. **保持一致性**：与 `TAGS`、`LINKS` 等变量的命名风格一致

## 影响范围

- 搜索范围选择功能正常工作
- 频道导航显示正常
- 不影响其他功能

## 测试结果

✅ 构建成功
✅ 无诊断错误
✅ 所有功能正常
